<!-- <!DOCTYPE html>
<html>
<head>
  <title>Fayl Yüklə</title>
</head>
<body>
  <h2>Excel faylınızı yükləyin</h2>
  <form method="post" enctype="multipart/form-data">
    {% csrf_token %}
    <input type="file" name="excel_file" required>
    <button type="submit">Göndər və Hesabla</button>
  </form>
</body>
</html> -->

{% load static %}
<!DOCTYPE html>
<html lang="az">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>AzConPrice · Fayl Yüklə</title>
  <style>
    :root{
      --primary:#F47424; /* narıncı */
      
      --card:#101a2b;
      --text:#e7edf7;
      --muted:#8fa2c5;
      --ring:rgba(244,116,36,.45);
      --border:#1b2740;
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial;
      color:var(--text);
      background: radial-gradient(1200px 800px at 20% -10%, rgba(244,116,36,.08), transparent 60%),
                  radial-gradient(1000px 700px at 120% 10%, rgba(244,116,36,.06), transparent 60%),
                  var(--bg);
      display:grid;
      place-items:center;
      padding:24px;
    }

    .card{
      width:min(720px, 98vw);
      background: linear-gradient(180deg, rgba(255,255,255,.03), rgba(252, 252, 252, 0.01)),
                  var(--card);
      border:1px solid var(--border);
      border-radius:20px;
      box-shadow: 0 10px 30px rgba(0,0,0,.35);
      padding:28px;
    }

    .brand{
      display:flex; align-items:center; gap:14px; margin-bottom:8px;
    }
    .brand img{height:48px; width:auto; display:block}
    .brand h1{
      font-size:22px; margin:0; letter-spacing:.2px; font-weight:800;
    }
    .brand .accent{color:var(--primary)}

    .subtitle{
      margin:2px 0 18px; color:var(--muted); font-size:14px;
    }

    .dropzone{
      border:2px dashed rgba(143,162,197,.45);
      border-radius:16px;
      background: rgba(255,255,255,.02);
      padding:28px;
      transition: border-color .2s ease, background .2s ease, transform .15s ease;
      display:flex; flex-direction:column; align-items:center; gap:10px;
      text-align:center;
    }
    .dropzone.dragover{
      border-color: var(--primary);
      background: rgba(244,116,36,.06);
      box-shadow: 0 0 0 6px var(--ring);
      transform: translateY(-1px);
    }

    .dz-title{ font-size:18px; font-weight:700; }
    .dz-hint{ color:var(--muted); font-size:13px; }

    .hidden-input{ display:none }

    .btn{
      appearance:none; border:none; cursor:pointer;
      padding:12px 18px; border-radius:12px; font-weight:700;
      transition: transform .06s ease, box-shadow .2s ease, background .2s ease, opacity .2s ease;
    }
    .btn:disabled{ opacity:.6; cursor:not-allowed }
    .btn-primary{
      background:linear-gradient(180deg, #f9853d, #F47424);
      color:#111; box-shadow:0 8px 20px rgba(244,116,36,.35);
    }
    .btn-primary:hover:not(:disabled){ filter:brightness(1.05) }
    .btn-primary:active:not(:disabled){ transform:translateY(1px) }
    .btn-ghost{
      background:transparent; color:var(--text);
      border:1px solid var(--border);
    }
    .row{
      margin-top:18px; display:flex; gap:12px; justify-content:flex-end; flex-wrap:wrap;
    }

    .file-pill{
      margin-top:12px;
      display:inline-flex; align-items:center; gap:8px;
      background:rgba(255,255,255,.06); border:1px solid var(--border);
      color:var(--text); padding:8px 12px; border-radius:999px; font-size:13px;
      max-width:100%; overflow:hidden; text-overflow:ellipsis; white-space:nowrap;
    }
    .file-pill .dot{width:8px; height:8px; border-radius:50%; background:var(--primary)}

    .note{
      margin-top:8px; color:var(--muted); font-size:12px;
    }

    @media (max-width:480px){
      .brand h1{font-size:18px}
      .dz-title{font-size:16px}
    }
  </style>
</head>
<body>
  <main class="card">
    <div class="brand">
      <img src="{% static 'img/azconprice-logo.png' %}" alt="AzConPrice loqo">
      <h1>AzCon<span class="accent">Price</span> · Excel yüklə</h1>
    </div>
    <p class="subtitle">Qiymət hesablaması üçün Excel faylınızı yükləyin. Yalnız .xlsx / .xls dəstəklənir.</p>

    <form id="uploadForm" method="post" enctype="multipart/form-data">
      {% csrf_token %}

      <!-- Drag & Drop sahəsi -->
      <label id="dropzone" class="dropzone" for="excelInput">
        <svg aria-hidden="true" width="36" height="36" viewBox="0 0 24 24" fill="none">
          <path d="M12 16V8m0 0-3 3m3-3 3 3M4 16.5A4.5 4.5 0 0 1 8.5 12h7A4.5 4.5 0 1 1 20 16.5"
                stroke="currentColor" stroke-width="1.7" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
        <div class="dz-title">Sürüşdürüb buraxın və ya klikləyin</div>
        <div class="dz-hint">Excel faylını seçmək üçün bu sahəyə klik edin</div>
        <input id="excelInput" class="hidden-input" type="file" name="excel_file" accept=".xlsx,.xls" required />
      </label>

      <!-- Seçilən fayl məlumatı -->
      <div id="fileInfo" class="file-pill" style="display:none">
        <span class="dot"></span>
        <span id="fileName">fayl.xlsx</span>
      </div>

      <div class="row">
        <button type="button" class="btn btn-ghost" id="clearBtn">Təmizlə</button>
        <button type="submit" class="btn btn-primary" id="submitBtn" disabled>
          Göndər və Hesabla
        </button>
      </div>

      <p class="note">Məlumatlar təhlükəsiz şəkildə yalnız hesablamalar üçün istifadə olunur.</p>
    </form>
  </main>

  <script>
    (function(){
      const dz = document.getElementById('dropzone');
      const input = document.getElementById('excelInput');
      const info = document.getElementById('fileInfo');
      const nameEl = document.getElementById('fileName');
      const submitBtn = document.getElementById('submitBtn');
      const clearBtn = document.getElementById('clearBtn');

      function setFile(file){
        if(!file) return;
        nameEl.textContent = file.name;
        info.style.display = 'inline-flex';
        submitBtn.disabled = false;
      }

      // drag&drop
      ['dragenter','dragover'].forEach(ev => dz.addEventListener(ev, e=>{
        e.preventDefault(); e.stopPropagation(); dz.classList.add('dragover');
      }));
      ['dragleave','drop'].forEach(ev => dz.addEventListener(ev, e=>{
        e.preventDefault(); e.stopPropagation(); dz.classList.remove('dragover');
      }));
      dz.addEventListener('drop', (e)=>{
        const file = e.dataTransfer.files?.[0];
        if(file){ input.files = e.dataTransfer.files; setFile(file); }
      });

      // file chooser
      input.addEventListener('change', (e)=>{
        const file = e.target.files?.[0];
        if(file) setFile(file);
      });

      // clear
      clearBtn.addEventListener('click', ()=>{
        input.value = ''; info.style.display='none'; submitBtn.disabled = true;
      });

      // tiny UX: disable while submitting
      document.getElementById('uploadForm').addEventListener('submit', ()=>{
        submitBtn.disabled = true;
        submitBtn.textContent = 'Yüklənir...';
      });
    })();
  </script>
</body>
</html>
